<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    프로그래머스 수식 최대화 (python 파이썬) - Tech
    
  </title>

  <meta name="description" content="프로그래머스 수식 최대화 문제를 Python으로 해결한 문제이다.">
  <!-- google 웹마스터 -->
  <meta name="google-site-verification" content="1M5pUHiID88fUVGyUOZvd5xyyGEcU37L6sdv7fkh8xg" />
  <!-- //google 웹마스터 -->

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css">

  <link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/algorithm/2021/05/19/maximize-expression.html">
  <link rel="alternate" type="application/rss+xml" title="Tech" href="/feed.xml">
  <link rel="stylesheet" href="/assets/css/syntax.css">
  <link rel="stylesheet" href="/assets/css/custom.css">

</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">Tech</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
		<li class="nav-item"><a class="nav-link">Category</a>
			<ul class="navbar-nav ml-auto">
			
			
			  
								
					<li class="nav-item">
						<a class="nav-link category-link " href="/algorithm">Algorithm</a>
					</li>
				
			  
			
			  
								
					<li class="nav-item">
						<a class="nav-link category-link " href="/architecture">Architecture</a>
					</li>
				
			  
			
			  
								
					<li class="nav-item">
						<a class="nav-link category-link " href="/cpp">C/C++</a>
					</li>
				
			  
			
			  
								
					<li class="nav-item">
						<a class="nav-link category-link " href="/english">English</a>
					</li>
				
			  
			
			  
								
					<li class="nav-item">
						<a class="nav-link category-link " href="/java">Java</a>
					</li>
				
			  
			
			  
				
			  
			
			  
			
			  
			
			  
			
			  
			
			</ul>
		</li>
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->
  <header class="masthead" style="height:200px; margin-bottom:30px; background-color:#fff !important">
    <div class="overlay" style="background-color:#fff !important"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-10 col-md-10 mx-auto">
          <div class="post-heading" style="padding:80px 0; color:#000 !important;">
            <h1 style="font-size:40px !important;">프로그래머스 수식 최대화 (python 파이썬)</h1>
            <h2 class="subheading" style="font-size:22px !important; color:#868e96 !important;">
				May 19, 2021
			</h2>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div id="div_container_post" class="container">
    <div class="row">
      <div class="col-lg-10 col-md-10 mx-auto">

        <p>프로그래머스 수식 최대화 문제를 Python으로 해결한 문제이다.</p>

<ul>
  <li><a href="https://programmers.co.kr/learn/courses/30/lessons/67257" target="_blank">프로그래머스 수식 최대화 문제 링크</a></li>
</ul>

<h3 id="문제-설명">문제 설명</h3>
<p>IT 벤처 회사를 운영하고 있는 라이언은 매년 사내 해커톤 대회를 개최하여 우승자에게 상금을 지급하고 있습니다.
이번 대회에서는 우승자에게 지급되는 상금을 이전 대회와는 다르게 다음과 같은 방식으로 결정하려고 합니다.
해커톤 대회에 참가하는 모든 참가자들에게는 숫자들과 3가지의 연산문자(<code class="highlighter-rouge">+, -, *</code>) 만으로 이루어진 연산 수식이 전달되며, 참가자의 미션은 전달받은 수식에 포함된 연산자의 우선순위를 자유롭게 재정의하여 만들 수 있는 가장 큰 숫자를 제출하는 것입니다.
단, 연산자의 우선순위를 새로 정의할 때, 같은 순위의 연산자는 없어야 합니다. 즉, <code class="highlighter-rouge">+</code> &gt; <code class="highlighter-rouge">-</code> &gt; <code class="highlighter-rouge">*</code> 또는 <code class="highlighter-rouge">-</code> &gt; <code class="highlighter-rouge">*</code> &gt; <code class="highlighter-rouge">+</code> 등과 같이 연산자 우선순위를 정의할 수 있으나 <code class="highlighter-rouge">+,*</code> &gt; <code class="highlighter-rouge">-</code> 또는 <code class="highlighter-rouge">*</code> &gt; <code class="highlighter-rouge">+,-</code>처럼 2개 이상의 연산자가 동일한 순위를 가지도록 연산자 우선순위를 정의할 수는 없습니다. 수식에 포함된 연산자가 2개라면 정의할 수 있는 연산자 우선순위 조합은 2! = 2가지이며, 연산자가 3개라면 3! = 6가지 조합이 가능합니다.
만약 계산된 결과가 음수라면 해당 숫자의 절댓값으로 변환하여 제출하며 제출한 숫자가 가장 큰 참가자를 우승자로 선정하며, 우승자가 제출한 숫자를 우승상금으로 지급하게 됩니다.</p>

<p>예를 들어, 참가자 중 네오가 아래와 같은 수식을 전달받았다고 가정합니다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"100-200*300-500+20"
</code></pre></div></div>

<p>일반적으로 수학 및 전산학에서 약속된 연산자 우선순위에 따르면 더하기와 빼기는 서로 동등하며 곱하기는 더하기, 빼기에 비해 우선순위가 높아 <code class="highlighter-rouge">*</code> &gt; <code class="highlighter-rouge">+,-</code> 로 우선순위가 정의되어 있습니다.
대회 규칙에 따라 <code class="highlighter-rouge">+</code> &gt; <code class="highlighter-rouge">-</code> &gt; <code class="highlighter-rouge">*</code> 또는 <code class="highlighter-rouge">-</code> &gt; <code class="highlighter-rouge">*</code> &gt; <code class="highlighter-rouge">+</code> 등과 같이 연산자 우선순위를 정의할 수 있으나 <code class="highlighter-rouge">+,*</code> &gt; <code class="highlighter-rouge">-</code> 또는 <code class="highlighter-rouge">*</code> &gt; <code class="highlighter-rouge">+,-</code> 처럼 2개 이상의 연산자가 동일한 순위를 가지도록 연산자 우선순위를 정의할 수는 없습니다.
수식에 연산자가 3개 주어졌으므로 가능한 연산자 우선순위 조합은 3! = 6가지이며, 그 중 <code class="highlighter-rouge">+</code> &gt; <code class="highlighter-rouge">-</code> &gt; <code class="highlighter-rouge">*</code> 로 연산자 우선순위를 정한다면 결괏값은 22,000원이 됩니다.
반면에 <code class="highlighter-rouge">*</code> &gt; <code class="highlighter-rouge">+</code> &gt; <code class="highlighter-rouge">-</code> 로 연산자 우선순위를 정한다면 수식의 결괏값은 -60,420 이지만, 규칙에 따라 우승 시 상금은 절댓값인 60,420원이 됩니다.</p>

<p>참가자에게 주어진 연산 수식이 담긴 문자열 expression이 매개변수로 주어질 때, 우승 시 받을 수 있는 가장 큰 상금 금액을 return 하도록 solution 함수를 완성해주세요.</p>

<h3 id="제한-사항">제한 사항</h3>
<ul>
  <li>expression은 길이가 3 이상 100 이하인 문자열입니다.</li>
  <li>expression은 공백문자, 괄호문자 없이 오로지 숫자와 3가지의 연산자(<code class="highlighter-rouge">+, -, *</code>) 만으로 이루어진 올바른 중위표기법(연산의 두 대상 사이에 연산기호를 사용하는 방식)으로 표현된 연산식입니다. 잘못된 연산식은 입력으로 주어지지 않습니다.
    <ul>
      <li>즉, <code class="highlighter-rouge">"402+-561*"</code>처럼 잘못된 수식은 올바른 중위표기법이 아니므로 주어지지 않습니다.</li>
    </ul>
  </li>
  <li>expression의 피연산자(operand)는 0 이상 999 이하의 숫자입니다.
    <ul>
      <li>즉, <code class="highlighter-rouge">"100-2145*458+12"</code>처럼 999를 초과하는 피연산자가 포함된 수식은 입력으로 주어지지 않습니다.</li>
      <li><code class="highlighter-rouge">"-56+100"</code>처럼 피연산자가 음수인 수식도 입력으로 주어지지 않습니다.</li>
    </ul>
  </li>
  <li>expression은 적어도 1개 이상의 연산자를 포함하고 있습니다.</li>
  <li>연산자 우선순위를 어떻게 적용하더라도, expression의 중간 계산값과 최종 결괏값은 절댓값이 2^63 - 1 이하가 되도록 입력이 주어집니다.</li>
  <li>같은 연산자끼리는 앞에 있는 것의 우선순위가 더 높습니다.</li>
</ul>

<h3 id="입출력-예">입출력 예</h3>

<table>
  <thead>
    <tr>
      <th>expression</th>
      <th>result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>“100-200 * 300-500+20”</td>
      <td>60420</td>
    </tr>
    <tr>
      <td>“50 * 6-3 * 2”</td>
      <td>300</td>
    </tr>
  </tbody>
</table>

<h3 id="입출력-예-설명">입출력 예 설명</h3>
<p><strong>예제 #1</strong><br />
<code class="highlighter-rouge">*</code> &gt; <code class="highlighter-rouge">+</code> &gt; <code class="highlighter-rouge">-</code> 로 연산자 우선순위를 정했을 때, 가장 큰 절댓값을 얻을 수 있습니다.
연산 순서는 아래와 같습니다.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>100-200*300-500+20
</code></pre></div></div>
<p>= <code class="highlighter-rouge">100-(200*300)-500+20</code><br />
= <code class="highlighter-rouge">100-60000-(500+20)</code><br />
= <code class="highlighter-rouge">(100-60000)-520</code><br />
= <code class="highlighter-rouge">(-59900-520)</code><br />
= <code class="highlighter-rouge">-60420</code><br />
따라서, 우승 시 받을 수 있는 상금은 |-60420| = 60420 입니다.</p>

<p><strong>예제 #2</strong><br />
<code class="highlighter-rouge">-</code> &gt; <code class="highlighter-rouge">*</code> 로 연산자 우선순위를 정했을 때, 가장 큰 절댓값을 얻을 수 있습니다.
연산 순서는 아래와 같습니다.(expression에서 <code class="highlighter-rouge">+</code> 연산자는 나타나지 않았으므로, 고려할 필요가 없습니다.)</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>50*6-3*2
</code></pre></div></div>
<p>= <code class="highlighter-rouge">50*(6-3)*2</code><br />
= <code class="highlighter-rouge">(50*3)*2</code><br />
= <code class="highlighter-rouge">150*2</code><br />
= <code class="highlighter-rouge">300</code><br />
따라서, 우승 시 받을 수 있는 상금은 300 입니다.</p>

<h3 id="문제풀이">문제풀이</h3>
<p>분할-정복을 이용하여 풀어보았다.</p>

<p>우선순위에 따라 (<code class="highlighter-rouge">+, *, -</code>)에 대해 expression을 분할하고, 연산을 진행하면 된다.</p>

<p>3가지 연산자에 따라 재귀로 우선순위를 정해주어도 되지만, 총 우선순위의 가짓수가 6개뿐이 안되므로 미리 우선순위를 정해두어도 문제를 풀 수 있다.</p>

<ol>
  <li>연산자의 모든 우선순위를 정의</li>
  <li>정의된 우선순위에 따라 재귀 함수 실행</li>
  <li>재귀함수내에서 분할-정복을 통해 expression을 쪼개고, 각각의 결과값을 얻어내어 합쳐나감</li>
  <li>최종적으로 나온 결과값을 기존의 결과값과 비교하여 값이 더 크면 새로운 결과값으로 갱신한다.</li>
</ol>

<h3 id="코드">코드</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">permutations</span>

<span class="k">def</span> <span class="nf">calc</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">seq</span><span class="p">,</span> <span class="n">exp</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">exp</span><span class="p">.</span><span class="n">isdigit</span><span class="p">():</span>  <span class="c1"># 더이상 exp에 연산자가 없으면
</span>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>  <span class="c1"># 그대로 리턴
</span>    <span class="k">else</span><span class="p">:</span>  <span class="c1"># 현 순위 연산자에 따라 진행
</span>        <span class="k">if</span> <span class="n">op</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span> <span class="o">==</span> <span class="s">"*"</span><span class="p">:</span>
            <span class="n">split_data</span> <span class="o">=</span> <span class="n">exp</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">"*"</span><span class="p">)</span>  <span class="c1"># 연산자로 쪼갬
</span>            <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">split_data</span><span class="p">:</span>  <span class="c1"># 쪼개진 각 부분에 대해 재귀
</span>                <span class="n">temp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">calc</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">seq</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">"*"</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp</span><span class="p">)))</span>  <span class="c1"># 재귀 실행 결과를 담은 배열에 대해 eval()함수로 계산
</span>
        <span class="k">if</span> <span class="n">op</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span> <span class="o">==</span> <span class="s">"+"</span><span class="p">:</span>
            <span class="n">split_data</span> <span class="o">=</span> <span class="n">exp</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">"+"</span><span class="p">)</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">split_data</span><span class="p">:</span>
                <span class="n">temp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">calc</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">seq</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">"+"</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp</span><span class="p">)))</span>

        <span class="k">if</span> <span class="n">op</span><span class="p">[</span><span class="n">seq</span><span class="p">]</span> <span class="o">==</span> <span class="s">"-"</span><span class="p">:</span>
            <span class="n">split_data</span> <span class="o">=</span> <span class="n">exp</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">"-"</span><span class="p">)</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">split_data</span><span class="p">:</span>
                <span class="n">temp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">calc</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">seq</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s">"-"</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp</span><span class="p">)))</span>

<span class="k">def</span> <span class="nf">solution</span><span class="p">(</span><span class="n">expression</span><span class="p">):</span>
    <span class="n">answer</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># 6가지 operation 정의
</span>    <span class="n">operations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">([</span><span class="s">'*'</span><span class="p">,</span> <span class="s">'+'</span><span class="p">,</span> <span class="s">'-'</span><span class="p">],</span> <span class="mi">3</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">operations</span><span class="p">:</span>  <span class="c1"># 정의된 op에 따라 calc 재귀 진행
</span>        <span class="n">result</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">calc</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">expression</span><span class="p">)))</span>  <span class="c1"># 얻어낸 결과값에 대해 절대값 취함.
</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">&gt;</span> <span class="n">answer</span><span class="p">:</span>  <span class="c1"># 기존의 결과값과 비교
</span>            <span class="n">answer</span> <span class="o">=</span> <span class="n">result</span>

    <span class="k">return</span> <span class="n">answer</span>
</code></pre></div></div>


        <hr>
        <div class="clearfix">
          
          <a class="btn btn-primary float-left" href="/algorithm/2021/05/18/measure-count-add.html" data-toggle="tooltip" data-placement="top" title="프로그래머스 약수의 개수와 덧셈 (python 파이썬)">&larr; 이전<span class="d-none d-md-inline">
              게시물</span></a>
          
          
          <a class="btn btn-primary float-right" href="/algorithm/2021/05/20/tuple.html" data-toggle="tooltip" data-placement="top" title="프로그래머스 튜플 (python 파이썬)">다음<span class="d-none d-md-inline">
              게시물</span> &rarr;</a>
          
        </div>
		
		<br><br>
		<div id="disqus_thread"></div>
		  <script>
		  /**
		  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
		  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
		  /*
		  var disqus_config = function () {
		  this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
		  this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
		  };
		  */
		  (function() { // DON'T EDIT BELOW THIS LINE
		  var d = document, s = d.createElement('script');
		  s.src = 'https://jokerldg.disqus.com/embed.js';
		  s.setAttribute('data-timestamp', +new Date());
		  (d.head || d.body).appendChild(s);
		  })();
		  </script>
		  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

		</div>

      </div>
    </div>
  </div>


  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/jokerLdg">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; jokerLdg 2021</p>
      </div>
    </div>
  </div>
</footer>


  <script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script>

<script src="/assets/scripts.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '');
</script>



</body>

</html>
